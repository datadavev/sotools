
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>sotools.common package &#8212; SOtools Documentation (1.x)</title>
    <link rel="stylesheet" href="_static/click.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Linking to metadata documents" href="external_metadata.html" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = './';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="external_metadata.html" title="Linking to metadata documents"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SOtools Documentation (1.x)</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sotools-common-package">
<h1>sotools.common package<a class="headerlink" href="#sotools-common-package" title="Permalink to this headline">¶</a></h1>
<p>Methods for common operations when reading and interpreting schema.org markup.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#sotools.common.getDatasetIdentifiers" title="sotools.common.getDatasetIdentifiers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatasetIdentifiers</span></code></a>(g)</p></td>
<td><p>Return a list of <code class="docutils literal notranslate"><span class="pre">SO:Dataset.identifier</span></code> entries from the provided Graph</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sotools.common.getDatasetMetadataLinks" title="sotools.common.getDatasetMetadataLinks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatasetMetadataLinks</span></code></a>(g)</p></td>
<td><p>Extract links to metadata documents describing SO:Dataset</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sotools.common.getDatasetMetadataLinksFromAbout" title="sotools.common.getDatasetMetadataLinksFromAbout"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatasetMetadataLinksFromAbout</span></code></a>(g)</p></td>
<td><p>Extract a list of metadata links SO:about(SO:Dataset)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sotools.common.getDatasetMetadataLinksFromEncoding" title="sotools.common.getDatasetMetadataLinksFromEncoding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatasetMetadataLinksFromEncoding</span></code></a>(g)</p></td>
<td><p>Extract link to metadata from SO:Dataset.encoding</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sotools.common.getDatasetMetadataLinksFromSubjectOf" title="sotools.common.getDatasetMetadataLinksFromSubjectOf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getDatasetMetadataLinksFromSubjectOf</span></code></a>(g)</p></td>
<td><p>Extract list of metadata links from SO.Dataset.subjectOf</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sotools.common.getLiteralDatasetIdentifiers" title="sotools.common.getLiteralDatasetIdentifiers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getLiteralDatasetIdentifiers</span></code></a>(g)</p></td>
<td><p>Retrieve literal SO:Dataset.identifier entries</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sotools.common.getStructuredDatasetIdentifiers" title="sotools.common.getStructuredDatasetIdentifiers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getStructuredDatasetIdentifiers</span></code></a>(g)</p></td>
<td><p>Extract structured SO:Dataset.identifier entries</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sotools.common.hasDataset" title="sotools.common.hasDataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hasDataset</span></code></a>(g)</p></td>
<td><p>Number of SO:Dataset graphs in g</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sotools.common.loadSOGraph" title="sotools.common.loadSOGraph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadSOGraph</span></code></a>([filename, data, publicID, …])</p></td>
<td><p>Load RDF string or file to an RDFLib ConjunctiveGraph</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sotools.common.loadSOGraphFromHtml" title="sotools.common.loadSOGraphFromHtml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadSOGraphFromHtml</span></code></a>(html, url)</p></td>
<td><p>Extract jsonld entries from provided HTML text</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#sotools.common.loadSOGraphFromUrl" title="sotools.common.loadSOGraphFromUrl"><code class="xref py py-obj docutils literal notranslate"><span class="pre">loadSOGraphFromUrl</span></code></a>(url)</p></td>
<td><p>Loads graph from json-ld contained in a landing page.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sotools.common.renderGraph" title="sotools.common.renderGraph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">renderGraph</span></code></a>(g)</p></td>
<td><p>For rendering an rdflib graph in Jupyter notebooks</p></td>
</tr>
</tbody>
</table>
<div class="section" id="module-sotools.common">
<span id="method-descriptions"></span><h2>Method Descriptions<a class="headerlink" href="#module-sotools.common" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="sotools.common.getDatasetIdentifiers">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getDatasetIdentifiers</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getDatasetIdentifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getDatasetIdentifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of <code class="docutils literal notranslate"><span class="pre">SO:Dataset.identifier</span></code> entries from the provided Graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – Graph containing <code class="docutils literal notranslate"><span class="pre">SO:Dataset</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{value:,</span> <span class="pre">url:,</span> <span class="pre">propertyId:}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load graph and show SO:Dataset.identifier entries</span>
<span class="kn">import</span> <span class="nn">sotools</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>

<span class="n">json_source</span> <span class="o">=</span> <span class="s2">&quot;source/examples/data/id_structured_01.json&quot;</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraph</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">json_source</span><span class="p">)</span>
<span class="n">identifiers</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">getDatasetIdentifiers</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The json-ld source graph:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">json_source</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The identifier(s) used in the dataset:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">identifiers</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>The json-ld source graph:
{
  &quot;@context&quot;: {
    &quot;@vocab&quot;: &quot;http://schema.org&quot;,
    &quot;datacite&quot;: &quot;http://purl.org/spar/datacite/&quot;
  },
  &quot;@type&quot;: &quot;Dataset&quot;,
  &quot;identifier&quot;: {
    &quot;@type&quot;: [
      &quot;PropertyValue&quot;,
      &quot;datacite:ResourceIdentifier&quot;
    ],
    &quot;datacite:usesIdentifierScheme&quot;: {
      &quot;@id&quot;: &quot;datacite:doi&quot;
    },
    &quot;propertyID&quot;: &quot;DOI&quot;,
    &quot;url&quot;: &quot;https://doi.org/10.1575/1912/bco-dmo.665253&quot;,
    &quot;value&quot;: &quot;10.1575/1912/bco-dmo.665253&quot;
  }
}

The identifier(s) used in the dataset:
[ { &#39;propertyId&#39;: &#39;DOI&#39;,
    &#39;url&#39;: &#39;https://doi.org/10.1575/1912/bco-dmo.665253&#39;,
    &#39;value&#39;: &#39;10.1575/1912/bco-dmo.665253&#39;}]
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="sotools.common.getDatasetMetadataLinks">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getDatasetMetadataLinks</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getDatasetMetadataLinks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getDatasetMetadataLinks" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract links to metadata documents describing SO:Dataset</p>
<p>Metadata docs can be referenced different ways</p>
<ul class="simple">
<li><p>as SO:Dataset.subjectOf</p></li>
<li><p>the inverse of 1, SO:CreativeWork.about(SO:Dataset)</p></li>
<li><p>SO:Dataset.encoding</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – Graph containing <code class="docutils literal notranslate"><span class="pre">SO:Dataset</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{dateModified:,</span> <span class="pre">encodingFormat:,</span> <span class="pre">contentUrl:,</span> <span class="pre">description:,</span> <span class="pre">subjectOf:,}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get links to metadata documents referenced from a SO:dataset</span>
<span class="kn">import</span> <span class="nn">sotools</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>

<span class="c1"># Note: in this case two entries are returned because the single</span>
<span class="c1"># link is recognized with two different encodingFormats</span>
<span class="n">json_source</span> <span class="o">=</span> <span class="s2">&quot;source/examples/data/ds_m_subjectof.json&quot;</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraph</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">json_source</span><span class="p">)</span>
<span class="n">links</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">getDatasetMetadataLinks</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The source graph:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">json_source</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The links to external metadata:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>The source graph:
{
  &quot;@context&quot;: {
    &quot;@vocab&quot;: &quot;https://schema.org/&quot;,
    &quot;datacite&quot;: &quot;http://purl.org/spar/datacite/&quot;
  },
  &quot;@id&quot;: &quot;ds-02&quot;,
  &quot;url&quot;: &quot;https://my.server.org/data/ds-02&quot;,
  &quot;@type&quot;: &quot;Dataset&quot;,
  &quot;identifier&quot;: &quot;dataset-02&quot;,
  &quot;name&quot;: &quot;Dataset subjectOf metadata&quot;,
  &quot;description&quot;: &quot;Dataset snippet with descriptive metadata indicated through subjectOf relation.&quot;,
  &quot;license&quot;: &quot;https://creativecommons.org/publicdomain/zero/1.0/&quot;,
  &quot;subjectOf&quot;: {
    &quot;@id&quot;: &quot;ds-02/metadata.xml&quot;,
    &quot;@type&quot;: &quot;CreativeWork&quot;,
    &quot;name&quot;: &quot;Dublin Core Metadata Document Describing the Dataset&quot;,
    &quot;url&quot;: &quot;https://my.server.org/data/ds-02/metadata.xml&quot;,
    &quot;encodingFormat&quot;: [
      &quot;application/rdf+xml&quot;,
      &quot;http://ns.dataone.org/metadata/schema/onedcx/v1.0&quot;
    ]
  }
}

The links to external metadata:
[ { &#39;contentUrl&#39;: &#39;https://my.server.org/data/ds-02/metadata.xml&#39;,
    &#39;dateModified&#39;: None,
    &#39;description&#39;: &#39;None&#39;,
    &#39;encodingFormat&#39;: &#39;http://ns.dataone.org/metadata/schema/onedcx/v1.0&#39;,
    &#39;subjectOf&#39;: &#39;file:///Users/vieglais/git/sotools/sotools/docsource/source/examples/data/ds-02&#39;},
  { &#39;contentUrl&#39;: &#39;https://my.server.org/data/ds-02/metadata.xml&#39;,
    &#39;dateModified&#39;: None,
    &#39;description&#39;: &#39;None&#39;,
    &#39;encodingFormat&#39;: &#39;application/rdf+xml&#39;,
    &#39;subjectOf&#39;: &#39;file:///Users/vieglais/git/sotools/sotools/docsource/source/examples/data/ds-02&#39;}]
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="sotools.common.getDatasetMetadataLinksFromAbout">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getDatasetMetadataLinksFromAbout</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getDatasetMetadataLinksFromAbout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getDatasetMetadataLinksFromAbout" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a list of metadata links SO:about(SO:Dataset)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – Graph containing an <code class="docutils literal notranslate"><span class="pre">SO:Dataset</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{dateModified:,</span> <span class="pre">encodingFormat:,</span> <span class="pre">contentUrl:,</span> <span class="pre">description:,</span> <span class="pre">subjectOf:,}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get links to metadata documents referenced from a SO:dataset</span>
<span class="kn">import</span> <span class="nn">sotools</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>

<span class="n">json_source</span> <span class="o">=</span> <span class="s2">&quot;source/examples/data/ds_m_about.json&quot;</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraph</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">json_source</span><span class="p">)</span>
<span class="n">links</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">getDatasetMetadataLinks</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The source graph:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">json_source</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The links to external metadata:&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">links</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>The source graph:
{
  &quot;@context&quot;: {
    &quot;@vocab&quot;: &quot;https://schema.org/&quot;
  },
  &quot;@graph&quot;: [
    {
      &quot;@type&quot;: &quot;Dataset&quot;,
      &quot;@id&quot;: &quot;./&quot;,
      &quot;identifier&quot;: &quot;dataset-01&quot;,
      &quot;name&quot;: &quot;Dataset with metadata about&quot;,
      &quot;description&quot;: &quot;Dataset snippet with metadata and data components indicated by hasPart and the descriptive metadata through an about association.&quot;,
      &quot;license&quot;: &quot;https://creativecommons.org/publicdomain/zero/1.0/&quot;,
      &quot;hasPart&quot;: [
        {
          &quot;@id&quot;: &quot;./metadata.xml&quot;
        },
        {
          &quot;@id&quot;: &quot;./data_part_a.csv&quot;
        }
      ]
    },
    {
      &quot;@id&quot;: &quot;./metadata.xml&quot;,
      &quot;@type&quot;: &quot;MediaObject&quot;,
      &quot;contentUrl&quot;: &quot;https://example.org/my/data/1/metadata.xml&quot;,
      &quot;dateModified&quot;: &quot;2019-10-10T12:43:11+00:00.000&quot;,
      &quot;description&quot;: &quot;A metadata document describing the Dataset and the data component&quot;,
      &quot;encodingFormat&quot;: &quot;http://www.isotc211.org/2005/gmd&quot;,
      &quot;about&quot;: [
        {
          &quot;@id&quot;: &quot;./&quot;
        },
        {
          &quot;@id&quot;: &quot;./data_part_a.csv&quot;
        }
      ]
    },
    {
      &quot;@id&quot;: &quot;./data_part_a.csv&quot;,
      &quot;@type&quot;: &quot;MediaObject&quot;,
      &quot;contentUrl&quot;: &quot;https://example.org/my/data/1/data_part_a.csv&quot;
    }
  ]
}

The links to external metadata:
[ { &#39;contentUrl&#39;: &#39;https://example.org/my/data/1/metadata.xml&#39;,
    &#39;dateModified&#39;: rdflib.term.Literal(&#39;2019-10-10T12:43:11+00:00.000&#39;),
    &#39;description&#39;: &#39;A metadata document describing the Dataset and the data &#39;
                   &#39;component&#39;,
    &#39;encodingFormat&#39;: &#39;http://www.isotc211.org/2005/gmd&#39;,
    &#39;subjectOf&#39;: &#39;file:///Users/vieglais/git/sotools/sotools/docsource/source/examples/data/&#39;}]
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="sotools.common.getDatasetMetadataLinksFromEncoding">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getDatasetMetadataLinksFromEncoding</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getDatasetMetadataLinksFromEncoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getDatasetMetadataLinksFromEncoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract link to metadata from SO:Dataset.encoding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> – ConjunctiveGraph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{dateModified:,</span> <span class="pre">encodingFormat:,</span> <span class="pre">contentUrl:,</span> <span class="pre">description:,</span> <span class="pre">subjectOf:,}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="sotools.common.getDatasetMetadataLinksFromSubjectOf">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getDatasetMetadataLinksFromSubjectOf</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getDatasetMetadataLinksFromSubjectOf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getDatasetMetadataLinksFromSubjectOf" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract list of metadata links from SO.Dataset.subjectOf</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> – ConjunctiveGraph</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{dateModified:,</span> <span class="pre">encodingFormat:,</span> <span class="pre">contentUrl:,</span> <span class="pre">description:,</span> <span class="pre">subjectOf:,}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="sotools.common.getLiteralDatasetIdentifiers">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getLiteralDatasetIdentifiers</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getLiteralDatasetIdentifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getLiteralDatasetIdentifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve literal SO:Dataset.identifier entries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – Graph containing <code class="docutils literal notranslate"><span class="pre">SO:Dataset</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{value:,</span> <span class="pre">url:,</span> <span class="pre">propertyId:}</span></code> with url=None and propertyId=”Literal”</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="sotools.common.getStructuredDatasetIdentifiers">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">getStructuredDatasetIdentifiers</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#getStructuredDatasetIdentifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.getStructuredDatasetIdentifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract structured SO:Dataset.identifier entries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – Graph containing <code class="docutils literal notranslate"><span class="pre">SO:Dataset</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">{value:,</span> <span class="pre">url:,</span> <span class="pre">propertyId:}</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="sotools.common.hasDataset">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">hasDataset</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#hasDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.hasDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of SO:Dataset graphs in g</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – The graph to evaluate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of SO:Dataset graphs in g</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>integer</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load a graph and evaluate if it contains a SO:Dataset</span>
<span class="kn">import</span> <span class="nn">sotools</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraph</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;source/examples/data/ds_bad_namespace.json&quot;</span><span class="p">)</span>
<span class="n">sotools</span><span class="o">.</span><span class="n">hasDataset</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="sotools.common.loadSOGraph">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">loadSOGraph</code><span class="sig-paren">(</span><em class="sig-param">filename=None</em>, <em class="sig-param">data=None</em>, <em class="sig-param">publicID=None</em>, <em class="sig-param">normalize=True</em>, <em class="sig-param">deslop=True</em>, <em class="sig-param">format='json-ld'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#loadSOGraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.loadSOGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Load RDF string or file to an RDFLib ConjunctiveGraph</p>
<p>Creates a ConjunctiveGraph from  the provided file or text. If both are
provided then text is used.</p>
<p>NOTE: Namespace use of <code class="docutils literal notranslate"><span class="pre">&lt;http://schema.org&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;https://schema.org&gt;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">&lt;http://schema.org/&gt;</span></code> is normalized to <code class="docutils literal notranslate"><span class="pre">&lt;https://schema.org/&gt;</span></code> if
<code class="docutils literal notranslate"><span class="pre">normalize</span></code> is True.</p>
<p>NOTE: Case of <code class="docutils literal notranslate"><span class="pre">SO:</span></code> properties in <cite>SO_TERMS</cite> is adjusted consistency if
<code class="docutils literal notranslate"><span class="pre">deslop</span></code> is True</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>string</em>) – path to RDF file on disk</p></li>
<li><p><strong>data</strong> (<em>string</em>) – RDF text</p></li>
<li><p><strong>publicID</strong> (<em>string</em>) – (from rdflib) The logical URI to use as the document base. If None specified the document location is used.</p></li>
<li><p><strong>normalize</strong> (<em>boolean</em>) – Normalize the use of schema.org namespace</p></li>
<li><p><strong>deslop</strong> (<em>boolean</em>) – Adjust schema.org terms for case consistency</p></li>
<li><p><strong>format</strong> (<em>string</em>) – The serialization format of the RDF to load</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The loaded graph</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ConjunctiveGraph</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load a Dataset from json-ld, normalize schema.org namespace, and dump as ttl.</span>
<span class="kn">import</span> <span class="nn">sotools</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="n">json_source</span> <span class="o">=</span> <span class="s2">&quot;source/examples/data/ds_bad_namespace.json&quot;</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraph</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">json_source</span><span class="p">,</span>
                        <span class="n">publicID</span><span class="o">=</span><span class="s2">&quot;https://my.data.net/data/&quot;</span><span class="p">,</span>
                        <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">deslop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loaded JSON:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">json_source</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Normalized schema.org namespace and serialized to ttl:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;ttl&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
</pre></div>
</div>
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Loaded JSON:
[
  {
    &quot;@context&quot;: {
      &quot;@vocab&quot;: &quot;https://schema.org&quot;
    },
    &quot;@id&quot;: &quot;demo_0&quot;,
    &quot;@type&quot;: &quot;Dataset&quot;,
    &quot;name&quot;: &quot;https, no trailing slash&quot;
  },
  {
    &quot;@context&quot;: {
      &quot;@vocab&quot;: &quot;http://schema.org&quot;
    },
    &quot;@id&quot;: &quot;demo_1&quot;,
    &quot;@type&quot;: &quot;Dataset&quot;,
    &quot;name&quot;: &quot;http, no trailing slash&quot;
  },
  {
    &quot;@context&quot;: {
      &quot;@vocab&quot;: &quot;http://schema.org/&quot;
    },
    &quot;@id&quot;: &quot;demo_2&quot;,
    &quot;@type&quot;: &quot;Dataset&quot;,
    &quot;name&quot;: &quot;http only&quot;
  }
]

Normalized schema.org namespace and serialized to ttl:

@prefix SO: &lt;https://schema.org/&gt; .
@prefix ns1: &lt;https://my.data.net/data/&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

ns1:demo_0 a SO:Dataset ;
    SO:name &quot;https, no trailing slash&quot; .

ns1:demo_1 a SO:Dataset ;
    SO:name &quot;http, no trailing slash&quot; .

ns1:demo_2 a SO:Dataset ;
    SO:name &quot;http only&quot; .


</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="sotools.common.loadSOGraphFromHtml">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">loadSOGraphFromHtml</code><span class="sig-paren">(</span><em class="sig-param">html</em>, <em class="sig-param">url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#loadSOGraphFromHtml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.loadSOGraphFromHtml" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract jsonld entries from provided HTML text</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>html</strong> (<em>string</em>) – HTML text to be parsed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Graph loaded from html</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ConjunctiveGraph</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="sotools.common.loadSOGraphFromUrl">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">loadSOGraphFromUrl</code><span class="sig-paren">(</span><em class="sig-param">url</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#loadSOGraphFromUrl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.loadSOGraphFromUrl" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads graph from json-ld contained in a landing page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> (<em>string</em>) – Url to process</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Graph of instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ConjunctiveGraph</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sotools</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="k">import</span> <span class="n">pprint</span>

<span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;https://www.bco-dmo.org/dataset/679374&quot;</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraphFromUrl</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">sotools</span><span class="o">.</span><span class="n">getDatasetIdentifiers</span><span class="p">(</span><span class="n">g</span><span class="p">),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>[ { &#39;propertyId&#39;: &#39;Literal&#39;,
    &#39;url&#39;: None,
    &#39;value&#39;: &#39;http://lod.bco-dmo.org/id/dataset/679374&#39;}]
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="sotools.common.renderGraph">
<code class="sig-prename descclassname">sotools.common.</code><code class="sig-name descname">renderGraph</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/sotools/common.html#renderGraph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sotools.common.renderGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>For rendering an rdflib graph in Jupyter notebooks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>g</strong> (<em>Graph</em>) – The graph to render</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Output for rendering directly in the notebook</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Jupyter cell</p>
</dd>
</dl>
<p>Example:</p>
<div class="jupyter_container docutils container">
<div class="code_cell highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load a graph and render the output (for jupyter notebooks)</span>
<span class="kn">import</span> <span class="nn">sotools</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sotools</span><span class="o">.</span><span class="n">loadSOGraph</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;source/examples/data/ds_m_subjectof.json&quot;</span><span class="p">)</span>
<span class="n">sotools</span><span class="o">.</span><span class="n">renderGraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/sotools.common_6_0.svg" src="_images/sotools.common_6_0.svg" /></div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">sotools.common package</a><ul>
<li><a class="reference internal" href="#module-sotools.common">Method Descriptions</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="external_metadata.html" title="previous chapter">Linking to metadata documents</a>
          
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Dave Vieglais.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  <script type="text/javascript" src="_static/version_warning_offset.js"></script>

  </body>
</html>